Vol <- Vol.srt
rm(pumphrs.srt, use.srt, Vol.srt)
# renumber sorted rows in sequence
rownames(pumphrs) <- 1:nrow(pumphrs)
rownames(use) <- 1:nrow(use)               Change in In-stream Salinity from Interception of Saline Groundwater Discharge into the Lower River Murray, Australia
rownames(use) <- 1:nrow(use)
rownames(Vol) <- 1:nrow(Vol)
Vol$caisson <- as.character(Vol$caisson)
# plot electricty consumption
qplot(Date, use, data=use, color=tariff, facets=~caisson, geom='line')
# plot vol pumped from caissons
qplot(Date, Vol, data=Vol, facets=~caisson, geom='line')
subset(Vol, caisson=="4")
subset(Vol, caisson=="5")
subset(Vol, caisson=="3")
subset(Vol, caisson=="6")
subset(Vol, caisson=="1")
subset(Vol, caisson=="2")
temp <- subset(Vol, caisson != "4" & subcaiss == "B")
subset(Vol, caisson == "4" & subcaiss == "B")
temp
subset(Vol, caisson == "4" & subcaiss == "B")
subset(Vol, !(caisson == "4" & subcaiss == "B"))
temp <- subset(Vol, !(caisson == "4" & subcaiss == "B"))
ls()
rm(temp, caiss04, caiss05)
require(DAAG)
ifelse(is.nan(pumphrs$hrs), NA, pumphrs$hrs)
pumphrs$hrs <- ifelse(is.nan(pumphrs$hrs), NA, pumphrs$hrs)
str(pumphrs)
caissons <- unique(pumphrs$caisson)
for (i in 1:length(caissons)) {
print(xyplot(time~Date, groups=Pump, data=subset(pumphrs, caisson==caissons[i]),
type='l', col=c('red','blue'), xlab="Year", ylab="Pump Hours",
main=paste("Caisson ", caissons[i])))
pause()
}
caissons <- unique(use$caisson)
for (i in 1:length(caissons)) {
print(xyplot(use~Date, groups=tariff, data=subset(use, caisson==caissons[i]),
type='l', col=c('red','blue'), xlab="Year", ylab="Electricity Use(kwh)",
main=paste("Caisson ", caissons[i])))
pause()
}
Vol$Vol <- with(Vol, ifelse(caisson %in% c("1","2","3","4","6"), Vol/1000, Vol))
caissons <- unique(Vol$caisson)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
caissons <- unique(Vol$caisson)
for (i in 1:length(caissons)) {
print(xyplot(Vol~Date, groups=subcaiss, data=subset(Vol, caisson==caissons[i]),
type='l', col=c('red','blue'), xlab="Year", ylab="Volume pumped (Ml)",
main=paste("Caisson ", caissons[i])))
pause()
}
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
hrsyr <- with(pumphrs, aggregate(hrs, by=list(substr(Date, 1,4), caisson),sum, na.rm=T))
names(hrsyr) <- c('year','caisson','cumhours')
hrsyr$year <- as.integer(hrsyr$year)
head(hrsyr)
timeyr <- with(pumphrs, aggregate(time, by=list(substr(Date, 1,4), caisson),sum, na.rm=T))
names(timeyr) <- c('year','caisson','hours')
timeyr$year <- as.integer(timeyr$year)
timeyr
hrsyr
nrow(timeyr); nrow(kwhyear)
#  aggregate use by year and caisson
annVol <- with(Vol, aggregate(Vol, by=list(substr(Date, 1,4), caisson),sum, na.rm=T))
names(annVol) <- c('year','caisson','vol')
annVol$year <- as.integer(annVol$year)
annVol$caisson <- as.numeric(annVol$caisson)
head(annVol, 20)
annVol
nrow(annVol)
caissdat <- data.frame(hrsyr[,], timeyr[,3], kwhyear[,3])
names(caissdat)[4:5] <- c('hours','cumkwh')
caissdat$caisson <- factor(caissdat$caisson)
head(caissdat)
hrsyr <- with(pumphrs, aggregate(hrs, by=list(substr(Date, 1,4), caisson),sum, na.rm=T))
names(hrsyr) <- c('year','caisson','cumhours')
hrsyr$year <- as.integer(hrsyr$year)
hrsyr
hrsyr <- with(pumphrs, aggregate(hrs, by=list(substr(Date, 1,4), caisson),sum, na.rm=T))
names(hrsyr) <- c('year','caisson','cumhours')
hrsyr$year <- as.integer(hrsyr$year)
head(hrsyr, 20)
timeyr <- with(pumphrs, aggregate(time, by=list(substr(Date, 1,4), caisson),sum, na.rm=T))
names(timeyr) <- c('year','caisson','hours')
timeyr$year <- as.integer(timeyr$year)
head(timeyr, 20)
# aggregate use by year and caisson
Kwyear <- with(use, aggregate(use, by=list(substr(Date, 1,4), caisson),sum, na.rm=T))
names(Kwyear) <- c('year','caisson','Kw')
Kwyear$year <- as.integer(kwhyear$year)
head(Kwyear, 20)
nrow(timeyr); nrow(Kwyear)
#  aggregate use by year and caisson
annVol <- with(Vol, aggregate(Vol, by=list(substr(Date, 1,4), caisson),sum, na.rm=T))
names(annVol) <- c('year','caisson','Ml')
annVol$year <- as.integer(annVol$year)
annVol$caisson <- as.numeric(annVol$caisson)
annVol
nrow(annVol)
# merge yearly pump hours and electricity use
caissdat <- data.frame(hrsyr[,], timeyr[,3], Kwyear[,3])
str(caissdat)
names(caissdat)[4:5] <- c('hours','cumKw')
caissdat$caisson <- factor(caissdat$caisson)
head(caissdat)
# merge yearly pump hours, electricity use and volume pumped
df1 <- merge(annVol, timeyr)
df1 <- df1[order(df1$caisson, df1$year),]
head(df1, 50)
df2 <- merge(annVol, kwhyear)
df2 <- df2[order(df2$caisson, df2$year),]
head(df2, 50)
df3 <- merge(df1, df2)
df3 <- df3[order(df3$caisson, df3$year),]
df3 <- subset(df3, vol > 0)
df3 <- subset(df3, Ml > 0)
head(df3, 50)
theme_set(theme_bw())
qplot(kwh, vol, data=df3, facets=.~caisson)
qplot(kwh, Ml, data=df3, facets=.~caisson)
df3[df3$caisson=="5",]
p <- ggplot(df3, aes(year, vol)) + geom_line()
p + facet_wrap(~caisson, scales="free_y")
p <- ggplot(df3, aes(year, Ml)) + geom_line()
p + facet_wrap(~caisson, scales="free_y")
p <- ggplot(df3, aes(kwh, Ml)) + geom_point()
p + facet_wrap(~caisson, scales="free")
p <- ggplot(df3, aes(hours, Ml)) + geom_point()
p + facet_wrap(~caisson, scales="free")
for (n in 1:6) {
print(subset(df3, caisson==n))
pause()
}
with(subset(df3, year > 2002), {
print(summary(lm(lm(vol~kwh-1))))
plot(kwh,vol, col=as.integer(caisson), pch=16,
xlab="power consumption (kw)", ylab="Volume pumped (Ml)")
abline(a=0, b=coef(lm(vol~kwh-1)))
legend("topleft", legend=c("caisson 1","caisson 2","caisson 3","caisson 4","caisson 5","caisson 6","fitted"), pch=16, col=c(1:6), lty=c(0,0,0,0,0,0,1))
})
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
with(subset(df3, year > 2002), {
print(summary(lm(lm(Ml~kwh-1))))
plot(kwh,Ml, col=as.integer(caisson), pch=15+as.integer(caisson),
xlab="power consumption (kw)", ylab="Volume pumped (Ml)")
abline(a=0, b=coef(lm(Ml~kwh-1)))
legend("topleft", legend=c("caisson 1","caisson 2","caisson 3","caisson 4","caisson 5","caisson 6","fitted"), pch=16, col=c(1:6), lty=c(0,0,0,0,0,0,1))
})
df3$caisson <- factor(df3$caisson)
summary(powerTransform(vol~kwh, data=subset(df3, caisson==1 & year>2004)))
summary(powerTransform(Ml~kwh, data=subset(df3, caisson==1 & year>2004)))
caiss01.lm01 <- lm(Ml~kwh-1, data=subset(df3, caisson==1 & year>2004))
anova(caiss01.lm01)
summary(caiss01.lm01)
par(mfrow=c(2,2))
plot(caiss01.lm01)
par(mfrow=c(1,1))
with(subset(df3, caisson==1 & year>2005), plot(kwh,Ml, pch=16, col='blue', xlab='Power Consumption (kilowatts)', ylab='Volume pumped (Ml)'))
with(subset(df3, caisson==1 & year>2004), plot(kwh,Ml, pch=16, col='blue', xlab='Power Consumption (kilowatts)', ylab='Volume pumped (Ml)'))
abline(a=0, b=coef(caiss01.lm01), lty=2, col="red")
summary(powerTransform(Ml~kwh, data=subset(df3, caisson==1 & year>2005)))
caiss01.lm01 <- lm(Ml~kwh-1, data=subset(df3, caisson==1 & year>2005))
anova(caiss01.lm01)
summary(caiss01.lm01)
par(mfrow=c(2,2))
plot(caiss01.lm01)
par(mfrow=c(1,1))
with(subset(df3, caisson==1 & year>2005), plot(kwh,Ml, pch=16, col='blue', xlab='Power Consumption (kilowatts)', ylab='Volume pumped (Ml)'))
abline(a=0, b=coef(caiss01.lm01), lty=2, col="red")
# update - add sqr term
caiss01.lm02 <- update(caiss01.lm01, .~.+I(kwh*kwh))
anova(caiss01.lm02, caiss01.lm01)
anova(caiss01.lm02)
summary(caiss01.lm02)
par(mfrow=c(2,2))
plot(caiss01.lm02)
par(mfrow=c(1,1))
with(subset(df3, caisson==1 & year>2005), plot(kwh, Ml, pch=16, col='blue', xlab='Power Consumption (kilowatts)', ylab='Volume pumped (Ml)'))
new <- data.frame(kwh = seq(0, 12000, 100))
lines(new$kwh, predict(caiss01.lm02, new), lty=2, col='red')
# caisson 2
summary(powerTransform(Ml~kwh, data=subset(df3, caisson==2 & year>2005)))
caiss02.lm01 <- lm(Ml~kwh-1, data=subset(df3, caisson==2 & year>2005))
anova(caiss02.lm01)
summary(caiss02.lm01)
par(mfrow=c(2,2))
plot(caiss02.lm01)
par(mfrow=c(1,1))
with(subset(df3, caisson==2 & year>2005), plot(kwh,Ml, pch=16, col='blue', xlab='Power Consumption (kilowatts)', ylab='Volume pumped (Ml)'))
abline(a=0, b=coef(caiss02.lm01), lty=2, col="red")
# caisson 3
summary(powerTransform(Ml~kwh, data=subset(df3, caisson==3 & year>2005)))
caiss03.lm01 <- lm(Ml~kwh-1, data=subset(df3, caisson==3 & year>2005))
anova(caiss03.lm01)
summary(caiss03.lm01)
par(mfrow=c(2,2))
plot(caiss03.lm01)
par(mfrow=c(1,1))
with(subset(df3, caisson==3 & year>2005), plot(kwh,Ml, pch=16, col='blue', xlab='Power Consumption (kilowatts)', ylab='Volume pumped (Ml)'))
abline(a=0, b=coef(caiss03.lm01), lty=2, col="red")
# caisson 4
summary(powerTransform(Ml~kwh, data=subset(df3, caisson==4 & year>2005)))
caiss04.lm01 <- lm(Ml~kwh-1, data=subset(df3, caisson==4 & year>2005))
anova(caiss04.lm01)
summary(caiss04.lm01)
par(mfrow=c(2,2))
plot(caiss04.lm01)
par(mfrow=c(1,1))
with(subset(df3, caisson==4 & year>2005), plot(kwh,Ml, pch=16, col='blue', xlab='Power Consumption (kilowatts)', ylab='Volume pumped (Ml)'))
abline(a=0, b=coef(caiss04.lm01), lty=2, col="red")
# caisson 5
summary(powerTransform(Ml~kwh, data=subset(df3, caisson==5 & year>2005)))
caiss05.lm01 <- lm(Ml~kwh-1, data=subset(df3, caisson==5 & year>2005))
anova(caiss05.lm01)
summary(caiss05.lm01)
par(mfrow=c(2,2))
plot(caiss05.lm01)
par(mfrow=c(1,1))
with(subset(df3, caisson==5 & year>2005), plot(kwh,Ml, pch=16, col='blue', xlab='Power Consumption (kilowatts)', ylab='Volume pumped (Ml)'))
abline(a=0, b=coef(caiss05.lm01), lty=2, col="red")
# caisson 6
summary(powerTransform(Ml~kwh, data=subset(df3, caisson==6 & year>2005)))
caiss06.lm01 <- lm(Ml~kwh-1, data=subset(df3, caisson==6 & year>2005))
anova(caiss06.lm01)
summary(caiss06.lm01)
par(mfrow=c(2,2))
plot(caiss06.lm01)
par(mfrow=c(1,1))
with(subset(df3, caisson==6 & year>2005), plot(kwh,Ml, pch=16, col='blue', xlab='Power Consumption (kilowatts)', ylab='Volume pumped (Ml)'))
abline(a=0, b=coef(caiss06.lm01), lty=2, col="red")
# caisson 4 before 2006
summary(powerTransform(vol~kwh, data=subset(df3, caisson==4 & year<=2005)))
summary(powerTransform(Ml~kwh, data=subset(df3, caisson==4 & year<=2005)))
caiss04.lm02 <- lm(Ml~kwh-1, data=subset(df3, caisson==4 & year<=2005))
anova(caiss04.lm02)
summary(caiss04.lm02)
par(mfrow=c(2,2))
plot(caiss04.lm02)
par(mfrow=c(1,1))
caiss04.lm01 <- lm(Ml~kwh-1, data=subset(df3, caisson==4 & year>2005))
caiss04b.lm02 <- lm(Ml~kwh-1, data=subset(df3, caisson==4 & year<=2005))
anova(caiss04b.lm02)
summary(caiss04b.lm02)
par(mfrow=c(2,2))
plot(caiss04b.lm02)
par(mfrow=c(1,1))
with(subset(df3, caisson==4 & year<=2005), plot(kwh,vol, pch=16, col='blue', xlab='Power Consumption (kilowatts)', ylab='Volume pumped (Ml)'))
abline(a=0, b=coef(caiss04b.lm02), lty=2, col="red")
with(subset(df3, caisson==4 & year<=2005), plot(kwh, Ml, pch=16, col='blue', xlab='Power Consumption (kilowatts)', ylab='Volume pumped (Ml)'))
abline(a=0, b=coef(caiss04b.lm02), lty=2, col="red")
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
summary(powerTransform(Ml~kwh, data=subset(df3, caisson==5 & year<=2005)))
caiss05.lm02 <- lm(Ml~sqrt(kwh)-1, data=subset(df3, caisson==5 & year<=2005))
anova(caiss05.lm02)
summary(caiss05.lm02)
par(mfrow=c(2,2))
plot(caiss05.lm02)
par(mfrow=c(1,1))
caiss05.lm02 <- lm(Ml~kwh-1, data=subset(df3, caisson==5 & year<=2005))
anova(caiss05.lm02)
summary(caiss05.lm02)
par(mfrow=c(2,2))
plot(caiss05.lm02)
par(mfrow=c(1,1))
with(subset(df3, caisson==5 & year<=2005), plot(kwh,Ml, pch=16, col='blue', xlab='Power Consumption (kilowatts)', ylab='Volume pumped (Ml)'))
new <- data.frame(kwh = seq(0, 2200, 100))
lines(new$kwh, predict(caiss05.lm02, new), lty=2, col='red')
summary(powerTransform(Ml~kwh, data=subset(df3, caisson==5 & year<=2005)))
caiss05.lm02 <- lm(Ml~sqrt(kwh)-1, data=subset(df3, caisson==5 & year<=2005))
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
# plot out all data
xyplot(Ml~kwh, groups=caisson, data=df3,
panel=function(x,y){
panel.xyplot(x,y)
panel.abline(lm(y~x))
},
pch=16,
col=as.numeric(caisson)+1
)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
xyplot(Ml~kwh, groups=caisson, data=df3[df3$caisson!=5], pch=16,
panel=function(x,y){
panel.xyplot(x,y)
panel.abline(lm(y~x))
},
pch=16,
col=as.numeric(caisson)+1
)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
str(df3)
subset(df3, caisson!="5")
xyplot(Ml~kwh, groups=caisson, data=subset(df3, caisson!="5"), pch=16,
panel=function(x,y){
panel.xyplot(x,y)
panel.abline(lm(y~x))
},
pch=16,
col=as.numeric(caisson)+1
)
with(subset(df3, year > 2002, & caisson !="5"), {
print(summary(lm(lm(Ml~kwh-1))))
plot(kwh,Ml, col=as.integer(caisson), pch=15+as.integer(caisson),
xlab="power consumption (kw)", ylab="Volume pumped (Ml)")
str(df3)
with(subset(df3, year > 2002 & caisson !="5"), {
print(summary(lm(lm(Ml~kwh-1))))
plot(kwh,Ml, col=as.integer(caisson), pch=15+as.integer(caisson),
xlab="power consumption (kw)", ylab="Volume pumped (Ml)")
abline(a=0, b=coef(lm(Ml~kwh-1)))
legend("topleft", legend=c("caisson 1","caisson 2","caisson 3","caisson 4","caisson 5","caisson 6","fitted"), pch=16, col=c(1:6), lty=c(0,0,0,0,0,0,1))
})
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
as.integer(df3$caisson)
as.integer(df3[df3$caisson!="5"]$caisson)
as.integer(df3[df3$caisson!="5",]$caisson)
sumps <- as.integer(df3[df3$caisson!="5",]$caisson)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
str(caissdat)
theme_set(theme_bw())
# hours pumped
p <- ggplot(caissdat, aes(year, hours)) + geom_line()
p + facet_wrap(~caisson, scales="free_y", nrow=2)
# power consumption
p <- ggplot(caissdat, aes(year, cumKw)) + geom_line()
p + facet_wrap(~caisson, scales="free_y", nrow=2)
# hours pumped vs power consumption
p <- ggplot(caissdat, aes(cumKw, hours)) + geom_point()
p + facet_wrap(~caisson, scales="free")
p <- ggplot(subset(df3, year > 2003 & caisson !="5"), aes(kwh, Ml)) + geom_point()
p
p + geom_smooth()
p + geom_smooth(method="lm")
CDS <- with(caissdat, aggregate(ml, by=list(year),sum, na.rm=T))
CDS <- with(caissdat, aggregate(Ml, by=list(year),sum, na.rm=T))
str(caissdat)
caissdat$Ml <- with(caissdat, cumKw * 0.0124)
p <- ggplot(caissdat, aes(year, Ml)) + geom_line()
p + facet_wrap(~caisson, scales="free_y")
# sum over all caissons
CDS <- with(caissdat, aggregate(Ml, by=list(year),sum, na.rm=T))
names(CDS) <- c("year","Ml")
with(CDS, plot(Ml~year, type='l', col="blue", xlab="Year", ylab="CDS Volume (Ml)"))
# writeout to Excel spreadsheet derived datasets
file <- "derived.xlsx"
write.xlsx2(caissdat, file, sheetName="AllCaisson")
write.xlsx2(df3, file, sheetName="volumes", append=T)
write.xlsx2(CDS, file, sheetName="EstCDSVol", append=T)
q()
source('C:/Users/Tony/AppData/Roaming/Tinn-R/tmp/sgInfo.R')
startSocketServer(port=8889)
ls()
with(subset(df3, year > 2003 & caisson !="5"), {
print(summary(lm(Ml~kwh-1)))
plot(kwh,Ml, col=sumps, pch=15+sumps,
xlab="power consumption (kw)", ylab="Volume pumped (Ml)")
abline(a=0, b=coef(lm(Ml~kwh-1)))
legend("topleft", legend=c("caisson 1","caisson 2","caisson 3","caisson 4","caisson 6","fitted"), pch=c(16,17,18,19,20), col=15+sumps, lty=c(0,0,0,0,0,1))
})
ls()
df3
sumps <- as.integer(df3[df3$caisson!="5",]$caisson)
with(subset(df3, year > 2003 & caisson !="5"), {
print(summary(lm(Ml~kwh-1)))
plot(kwh,Ml, col=sumps, pch=15+sumps,
xlab="power consumption (kw)", ylab="Volume pumped (Ml)")
abline(a=0, b=coef(lm(Ml~kwh-1)))
legend("topleft", legend=c("caisson 1","caisson 2","caisson 3","caisson 4","caisson 6","fitted"), pch=c(16,17,18,19,20), col=15+sumps, lty=c(0,0,0,0,0,1))
})
sumps
sumps <- as.integer(df3[df3$caisson!="5",]$caisson)
print(summary(lm(Ml~kwh-1)))
xlab="power consumption (kw)", ylab="Volume pumped (Ml)")
abline(a=0, b=coef(lm(Ml~kwh-1)))
legend("topleft", legend=c("caisson 1","caisson 2","caisson 3","caisson 4","caisson 6","fitted"), pch=c(16,17,18,19,20), col=unique(sumps), lty=c(0,0,0,0,0,1))
})
with(subset(df3, year > 2003 & caisson !="5"), {
print(summary(lm(Ml~kwh-1)))
plot(kwh,Ml, col=sumps, pch=15+sumps,
xlab="power consumption (kw)", ylab="Volume pumped (Ml)")
abline(a=0, b=coef(lm(Ml~kwh-1)))
legend("topleft", legend=c("caisson 1","caisson 2","caisson 3","caisson 4","caisson 6","fitted"), pch=c(16,17,18,19,20), col=unique(sumps), lty=c(0,0,0,0,0,1))
})
require(knitr); knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.Rnw')
knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.Rnw')
q()
source('C:/Users/Tony/AppData/Roaming/Tinn-R/tmp/sgInfo.R')
startSocketServer(port=8889)
source('C:/Users/Tony/AppData/Roaming/Tinn-R/tmp/sgInfo.R')
startSocketServer(port=8889)
opts_chunk$set(echo=FALSE, fig.path="../figures/", cache.path='../cache/', cache=TRUE, fig.width=13.25, fig.height=10, dev="pdf")
require(xlsx)
ls()
plot(kwh,Ml, col=sumps, pch=15+sumps,
with(subset(df3, year > 2003 & caisson !="5"), {
#print(summary(lm(Ml~kwh-1)))
plot(kwh,Ml, col=sumps, pch=15+sumps,
xlab="power consumption (kW)", ylab="Volume pumped (Ml)")
abline(a=0, b=coef(lm(Ml~kwh-1)))
legend("topleft", legend=c("caisson 1","caisson 2","caisson 3","caisson 4","caisson 6","fitted"), pch=c(16,17,18,19,20), col=unique(sumps), lty=c(0,0,0,0,0,1))
})
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
?legend
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
sumps
sumps <- unique(as.integer(df3[df3$caisson!="5",]$caisson))
sumps
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.Rnw')
knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.tex')
local({pkg <- select.list(sort(.packages(all.available = TRUE)),graphics=TRUE)
if(nchar(pkg)) library(pkg, character.only=TRUE)})
knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.tex')
knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.Rnw')
knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.tex')
getwd()
knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.Rnw')
knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.Rnw')
knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.Rnw')
knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.Rnw')
q()
source('C:/Users/Tony/AppData/Roaming/Tinn-R/tmp/sgInfo.R')
startSocketServer(port=8889)
ls()
opar <- par(mar=c(c(5.1,7.1,2.1,6.1)))
with(subset(df3, year > 2003 & caisson !="5"), {
print(summary(lm(Ml~kwh-1)))
plot(kwh,Ml, col=sumps, pch=14+sumps, cex.axis=1.5, cex=1.5, cex.lab=1.5, las=1,
xlab="Power consumption (kW)", ylab="Volume pumped (ML)")
abline(a=0, b=coef(lm(Ml~kwh-1)))
legend("topleft", legend=c("caisson 1","caisson 2","caisson 3","caisson 4","caisson 6","fitted"), pch=c(15,16,17,18,20), col=unique(sumps), lty=c(0,0,0,0,0,1), cex=1.5)
})
par(opar)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
opar <- par(mar=c(c(5.1,7.1,2.1,6.1)))
with(subset(df3, year > 2003 & caisson !="5"), {
#print(summary(lm(Ml~kwh-1)))
plot(kwh,Ml, col=sumps, pch=14+sumps, cex.axis=1.5, cex=1.5, cex.lab=1.5, las=1,
xlab="Power consumption (kW)", ylab="Volume pumped (ML)")
abline(a=0, b=coef(lm(Ml~kwh-1)))
text(19000, 200, substitue("ML = 0.0124*kW", r^2=="0.96"))
legend("topleft", legend=c("caisson 1","caisson 2","caisson 3","caisson 4","caisson 6","fitted"), pch=c(15,16,17,18,20), col=unique(sumps), lty=c(0,0,0,0,0,1), cex=1.5)
})
with(subset(df3, year > 2003 & caisson !="5"), {
#print(summary(lm(Ml~kwh-1)))
plot(kwh,Ml, col=sumps, pch=14+sumps, cex.axis=1.5, cex=1.5, cex.lab=1.5, las=1,
xlab="Power consumption (kW)", ylab="Volume pumped (ML)")
abline(a=0, b=coef(lm(Ml~kwh-1)))
text(19000, 200, substitute("ML = 0.0124*kW", r^2=="0.96"))
legend("topleft", legend=c("caisson 1","caisson 2","caisson 3","caisson 4","caisson 6","fitted"), pch=c(15,16,17,18,20), col=unique(sumps), lty=c(0,0,0,0,0,1), cex=1.5)
})
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
text(19000, 200, expression(hat(ML) = 0.0124*kW, r^2=0.96)
text(19000, 200, expression(hat(ML) == 0.0124*kW, r^2==0.96)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
text(19000, 200, expression(ML == 0.0124 %*% kW))
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
text(19500, 200, expression(ML == 0.0124 %*% kW))
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
?arrows
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
text(20000, 200, paste('Equation of line is:', expression(ML == 0.0124 %*% kW)))
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
text(20000, 200, paste('Equation of line is: ML = 0.0124 * kW'))
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
source(.trPaths[5], echo=TRUE, max.deparse.length=200)
require(knitr); knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.Rnw')
source('C:/Users/Tony/AppData/Roaming/Tinn-R/tmp/sgInfo.R')
startSocketServer(port=8889)
knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.Rnw')
knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.Rnw')
knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.Rnw')
knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.Rnw')
knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.Rnw')
knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.Rnw')
knit('C:/Users/Tony/Laroona Consulting/IIM/Berri_Renmark/report/Berri_Renmark.Rnw')
q()
